# SHADOW SYSTEM iO v2.0

**Professional Ukrainian Telegram Marketing Automation Platform**

A comprehensive system for managing Telegram marketing campaigns, bot networks, OSINT intelligence, and team collaboration with AI-powered features.

## Key Features

### Bot Network Management
- Session import (Telethon/Pyrogram formats)
- Encrypted session storage with AES-256
- Bot warming cycles (72-hour, 3-phase)
- Proxy management and rotation
- Mass account control

### Campaign & Mailing
- Multiple campaign types: broadcast, targeted, drip, sequential
- A/B testing support
- Scheduling with time presets
- Rate limiting (30 req/sec global, 25 req/sec per bot)
- Message queue with async workers
- Real-time statistics tracking

### OSINT Tools
- Telegram user/chat analysis
- DNS/WHOIS lookups
- Image metadata extraction
- Geo Scanner (search chats by location)
- AI-powered report generation
- Evidence export (JSON/HTML/PDF)

### AI Features (Replit AI Integrations)
- Campaign text generation (4 styles)
- Sentiment analysis
- OSINT report generation
- Message rewriting (5 tones)
- Funnel step generation
- Chat history analysis
- Response template generation
- Audience analysis with recommendations

### Funnel Management
- Full CRUD operations
- Multi-step funnels with photo support
- Tariff configuration per funnel
- Conversion tracking and statistics
- AI-assisted step generation

### Security
- Role-based access control (GUEST/MANAGER/LEADER/ADMIN)
- SHADOW key licensing system
- IP whitelisting for admins
- Anti-fraud behavioral analysis
- Comprehensive audit logging
- Emergency router for critical control
- Rate limiting and flood protection

### Team Collaboration
- CRM for managers
- Invite code generation
- Activity tracking
- Referral system with bonuses
- Ticket support system

### Analytics & Export
- PDF report generation
- CRM exports (Notion, Airtable, Google Sheets)
- Key expiration notifications
- Segmentation (new_user, active, inactive, power_user, paying)

## System Architecture

```
shadow-system/
├── bot.py                 # Main entry point
├── config/                # Configuration files
├── core/                  # Core services
│   ├── ai_service.py      # AI/GPT integration
│   ├── role_constants.py  # Unified role definitions
│   ├── roles.py           # Permission system
│   ├── alerts.py          # Notification system
│   ├── audit_logger.py    # Audit logging
│   ├── rate_limiter.py    # Rate limiting
│   ├── message_queue.py   # Async message queue
│   ├── mailing_scheduler.py # Campaign scheduler
│   ├── anti_fraud.py      # Fraud detection
│   └── segmentation.py    # User segmentation
├── database/
│   ├── models.py          # SQLAlchemy models
│   └── crud.py            # Database operations
├── handlers/              # Telegram bot handlers
│   ├── user.py            # User commands
│   ├── admin.py           # Admin panel
│   ├── funnels.py         # Funnel CRUD
│   ├── osint.py           # OSINT tools
│   ├── mailing.py         # Campaign management
│   └── ...                # Other handlers
├── keyboards/             # Telegram keyboards
├── middlewares/           # Security & role middlewares
├── services/              # Business logic
│   ├── user_service.py    # User management
│   └── funnel_service.py  # Funnel operations
└── utils/                 # Utilities
```

## Role System

| Role | Access Level | Capabilities |
|------|--------------|--------------|
| GUEST | 0 | View tariffs, submit applications |
| MANAGER | 1 | Mailings, OSINT, botnet operation |
| LEADER | 2 | Team management, license generation, funnels |
| ADMIN | 3 | Full system control, emergency access |

## Installation

### Prerequisites
- Python 3.11+
- PostgreSQL database
- Telegram Bot Token
- Telegram API credentials (API_ID, API_HASH)

### Environment Variables
```
BOT_TOKEN=your_telegram_bot_token
TELEGRAM_API_ID=your_api_id
TELEGRAM_API_HASH=your_api_hash
DATABASE_URL=postgresql://...
```

### Running
```bash
python bot.py
```

## License Activation

The system uses SHADOW keys for authorization:
1. Request a key from administrator
2. Use `/activate <KEY>` command
3. Key binds to your Telegram ID

Manager access requires INV codes generated by Leaders.

## Technology Stack

- **Bot Framework**: aiogram 3.3
- **Database**: PostgreSQL + SQLAlchemy + asyncpg
- **Sessions**: Telethon for Telegram client sessions
- **AI**: OpenAI via Replit AI Integrations (GPT-5)
- **Security**: AES-256 Fernet encryption
- **Reports**: ReportLab (PDF), Jinja2 (HTML)

## Services (19 Active)

1. RateLimiter - Token bucket algorithm
2. MessageQueue - 3 async workers
3. MailingScheduler - Campaign scheduling
4. AntiFraud - Behavioral analysis
5. Segmentation - Automatic user tagging
6. KeyNotifications - Expiry alerts
7. SecurityCache - Fast user blocking
8. AuditLogger - Action tracking
9. EncryptionManager - Session encryption
10. AIService - GPT integration

## Language

The entire interface is in Ukrainian.
